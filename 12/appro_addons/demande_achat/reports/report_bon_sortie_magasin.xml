<?xml version="1.0" encoding="UTF-8" ?>
<odoo>
    <template id="demande_achat.bon_de_sortie">
        <t t-call="web.external_layout">
        <!---->
        <t>
<!--        <t t-call="report.html_container">-->
        <t t-foreach="docs" t-as="o">

                <div class="header">
                    <table style="border: 1px solid black;width:100%">
                        <tr>
                            <td class="text-center"  style="border: 1px solid black;padding:7px;">
                                <img src='/base_vigilance/static/src/img/logo.png' style="width:40%"/>
                            </td>
                            <td class="text-center" style="border: 1px solid black;padding:7px;width:70%">
                                <h2 style="text-align:center;"><strong>BON DE SORTIE MAGASIN   </strong></h2>
                            </td>
                        </tr>
                    </table>

                </div>

                    <div class="page">
                   <table style="border: 1px solid black;width:100%;font-size:15px">
                    <tr>
                        <td class="text-left" style="vertical-align:middle;font-size:15px;border: 1px solid black;padding:5px" colspan="3">
                            <strong>N°: <span t-field="o.name"/></strong>
                        </td>

                        <td class="text-left" style="font-size:15px;border: 1px solid black;padding:5px">
                           <strong>Structure /Service/Site : </strong>

                        </td>
                        <td name="td_sched_date" class="text-left" style="font-size:15px;border: 1px solid black;padding:5px">
                            <strong>Date :</strong>
                                   <t t-if="o.state == 'done'">
                                            <span t-field="o.date_done"/>
                                   </t>
                                   <t t-if="o.state != 'done'">
                                        <span t-field="o.scheduled_date"/>
                                   </t>
                                </td>

                    </tr>
                    <tr>
                        <td class="text-left" rowspan="2" style="font-size:15px;border: 1px solid black;padding:5px"><strong>Cession Inter-Site </strong></td>
                        <td class="text-left" style="font-size:15px;border: 1px solid black;padding:5px">Oui</td>
                        <td class="text-left" style="font-size:15px;border: 1px solid black;padding:5px" colspan="3" rowspan="2"><strong>Lieu: </strong></td>
                    </tr>

                    <tr>
                        <td class="text-left" style="font-size:15px;border: 1px solid black;;padding:5px">Non</td>
                    </tr>

                   </table>


                   <table  style="border: 1px solid black;font-size:15px; min-height:500px;" t-if="o.pack_operation_ids and o.state not in ['draft','waiting']">
                       <t t-set="has_serial_number" t-value="o.pack_operation_ids.filtered('pack_lot_ids')" groups="stock.group_production_lot"/>
                      <tr  style="font-style:normal;font-weight: normal;vertical-align:middle;height:20px;">
                         <td class="text-left" style="vertical-align:middle;width:50px;border: 1px solid black;padding:3px "><span>N°  </span></td>
                         <td class="text-center" style=" vertical-align:middle;width:100px;border: 1px solid black;padding:3px "><span>Code d'article</span></td>
                         <td class="text-center" style=" vertical-align:middle;width:50px;border: 1px solid black;padding:3px  "><span>Unité</span></td>
                         <td class="text-center" style="vertical-align:middle;width:400px;border: 1px solid black;padding:3px "><span>Déscription</span></td>
                         <td class="text-center" style="vertical-align:middle;width:200px;border: 1px solid black;padding:3px "><span>Quantité demandée</span></td>
                         <td class="text-center" style=" vertical-align:middle;width:200px;border: 1px solid black;padding:3px " t-if="any([pack_operation.state == 'done' for pack_operation in o.pack_operation_ids])" ><span>Quantité Livrée</span></td>
                      </tr>

                     <t t-foreach="o.pack_operation_ids" t-as="move">
                      <tr  style="border: 1px solid black;"  t-if=" len(o.pack_operation_ids)-1 >= move_index">
                          <td class="text-left" style=" vertical-align:middle;border: 1px solid black;padding:3px "><span t-esc='move_index + 1'/></td>
                          <td class="text-center" style=" vertical-align:middle;border: 1px solid black;padding:3px "><span t-field="move.product_id.default_code"></span></td>
                          <td class="text-center" style=" vertical-align:middle;border: 1px solid black;padding:3px "><span t-field="move.product_uom_id"/></td>
                          <td class="text-left" style="vertical-align:middle;border: 1px solid black;padding:3px "><span t-field="move.product_id.name"/></td>
                          <td class="text-center" style=" vertical-align:middle;border: 1px solid black;padding:3px "><span t-field="move.product_qty"/></td>
                          <td class="text-center" style=" vertical-align:middle;border: 1px solid black;padding:3px " t-if="move.state == 'done'"><t t-if="move.ordered_qty !=move.qty_done"><t t-set="backorder" t-value="True"/></t><span t-field="move.qty_done"/></td>
                      </tr>
                        <t  t-if=" move_index ==  len(o.pack_operation_ids)-1 and 22 >=  move_index"  >
                        <t t-foreach="range(len(o.pack_operation_ids), 22)" t-as="i">
                          <tr  style="border: 1px solid black;">
                            <td style="border-left: 1px solid black;border-right: 1px solid black;padding:3px;color:#FFFFFF">vide </td>
                            <td style="border-left: 1px solid black;border-right: 1px solid black;padding:3px;color:#FFFFFF">vide </td>
                            <td style="border-left: 1px solid black;border-right: 1px solid black;padding:3px;color:#FFFFFF">vide </td>
                            <td style="border-left: 1px solid black;border-right: 1px solid black;padding:3px;color:#FFFFFF">vide </td>
                            <td style="border-left: 1px solid black;border-right: 1px solid black;padding:3px;color:#FFFFFF">vide </td>
                            <td style="border-left: 1px solid black;border-right: 1px solid black;padding:3px;color:#FFFFFF">vide </td>
                    </tr>
                        </t>
                        </t>
                     </t>

                        <tr>
                           <td colspan="3" class="text-center" style="border: 1px solid black;padding:5px;"><strong><u><i>Demandeur</i></u></strong></td>
                           <td class="text-center" style="border: 1px solid black;;padding:5px;"><strong><u><i>Magasin</i></u></strong></td>
                           <td colspan="2" class="text-center" style="border: 1px solid black;;padding:5px;"><strong><u><i>Transporteur</i></u></strong></td>
                        </tr>
                        <tr>
                           <td colspan="3" class="text-left" style="padding:8px;border-left: 1px solid black">Nom et Prénom:</td>
                           <td class="text-left" style="padding:8px;border-left: 1px solid black">Nom et Prénom:</td>
                           <td colspan="2" class="text-left" style="padding:8px;border-left: 1px solid black">Nom et prénom du chauffeur:</td>
                       </tr>
                       <tr>
                           <td colspan="3" class="text-left" style="color:#FFFFFF;padding:8px;border-left: 1px solid black">vide: </td>
                           <td class="text-left" style="color:#FFFFFF;padding:8px;border-left: 1px solid black">vide</td>
                           <td colspan="2" class="text-left" style="padding:8px;border-left: 1px solid black">Moyen de transport :</td>
                       </tr>
                       <tr>
                           <td colspan="3" class="text-left" style="padding:8px;border-left: 1px solid black">Signature:</td>
                           <td class="text-left" style="padding:8px;border-left: 1px solid black">Signature:</td>
                           <td colspan="2" class="text-left" style="padding:8px;border-left: 1px solid black">Matricule : </td>
                       </tr>
                       <tr>
                           <td colspan="3" class="text-left" style="color:#FFFFFF;padding:8px;border-left: 1px solid black">vide</td>
                           <td class="text-left" style="color:#FFFFFF;padding:8px;border-left: 1px solid black">vide</td>
                           <td colspan="2" class="text-left" style="padding:8px;border-left: 1px solid black">Signature :</td>
                       </tr>
                       <tr>
                           <td colspan="3" class="text-left" style="color:#FFFFFF;padding:8px;border-left: 1px solid black">vide</td>
                           <td class="text-left" style="color:#FFFFFF;padding:8px;border-left: 1px solid black">vide</td>
                           <td colspan="2" class="text-left" style="color:#FFFFFF;padding:8px;border-left: 1px solid black">vide</td>
                       </tr>
                    </table>
                        <!---->

 </div>
    </t>
            </t>
            </t>
    </template>
</odoo>