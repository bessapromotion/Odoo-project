<?xml version="1.0" encoding="utf-8"?>
<odoo>
		<template id="report_purchaseorder_document" inherit_id="purchase.report_purchaseorder_document">
            <xpath expr="//div[1]" position="replace">
                <div style="padding-top:20px;">
                    <p></p>
                     <strong t-field="o.partner_id" /><br></br>
                <t t-if="o.partner_id.street" >
                          <span t-field="o.partner_id.street"/>
                </t><br></br>
                <t t-if="o.partner_id.state_id" >
                          <span t-field="o.partner_id.state_id" />
                </t><br></br>
                <t t-if="o.partner_id.fax" >  <strong >Fax : </strong>
                          <span t-field="o.partner_id.fax"/>
                </t><br></br>
                <t t-if="o.partner_id.email" >  <strong >E-mail : </strong>
                          <span t-field="o.partner_id.email"/>
                </t><br></br>
                <t t-if="o.partner_id.rc" > <strong >RC : </strong>
                          <span t-field="o.partner_id.rc"/>
                </t>
                </div>
            </xpath>
            <xpath expr="//h2[3]" position="replace">
                 <h2 t-if="o.state in ['purchase', 'done']" >Commande : <span t-field="o.name"/> </h2>
                 <p align="right"> Alger le :  <span t-esc="o.date_order"  t-options='{"widget": "date"}'/>
                 </p>
            </xpath>
            <xpath expr="//div[@id='informations']" position="replace">
                <t t-if="o.mode_paiement_id" >
                         <p> Compte Bancaire : <span t-field="o.journal_id"/></p>
                </t>
                <t t-if="o.mode_paiement_id" >
                         <p> RIB : <span t-field="o.rib"/></p>
                </t>
                <t t-if="o.mode_paiement_id" >
                         <p> Mode de paiement : <span t-field="o.mode_paiement_id"/></p>
                </t>
                <t t-if="o.project_id" >
                         <p> Projet : <span t-field="o.project_id"/>
                         </p>
                </t>
            </xpath>
            <xpath expr="//table[@class='table table-sm o_main_table']" position="replace">
                <table class="table table-sm o_main_table">
                <thead>
                    <tr>
                        <th class="text-center"><strong>N°</strong></th>
                        <!--<th class="text-center"><strong>Code</strong></th>-->
                        <th><strong>Désignation</strong></th>
                        <th><strong>TVA</strong></th>
                        <th class="text-right"><strong>Qté.</strong></th>
                        <th class="text-right"><strong>Prix U.</strong></th>
                        <th class="text-right"><strong>Montant</strong></th>
                    </tr>
                </thead>
                <tbody>
                    <tr t-foreach="o.order_line" t-as="line">
                        <td class="text-center">
                            <span t-esc="line_index + 1" />
                        </td>
                        <td>
                            <span t-field="line.name"/>
                        </td>
                        <td>
                            <span t-esc="', '.join(map(lambda x: x.name, line.taxes_id))"/>
                        </td>
                        <td class="text-right">
                            <span t-field="line.product_qty"/>
                            <span t-field="line.product_uom.name" groups="uom.group_uom"/>
                        </td>
                        <td class="text-right">
                            <span t-field="line.price_unit"/>
                        </td>
                        <td class="text-right">
                            <span t-field="line.price_subtotal"
                                t-options='{"widget": "monetary", "display_currency": o.currency_id}'/>
                        </td>
                    </tr>
                </tbody>
                </table>
             </xpath>

            <xpath expr="//div[@id='total']" position="replace">
             <div id="total" class="row justify-content-end"  >
                 <div class="col-8" >
                     <br></br><br></br>
                     <p > Arrêté le présent bon de commande à la somme de :
                     <strong t-field="o.montant_lettre"/>
                     </p>
                 </div>
                 <div class="col-4" >
                    <table class="table table-sm" >
                        <tr class="border-black">
                            <td><strong>Total HT</strong></td>
                            <td class="text-right">
                                <span t-field="o.amount_untaxed"
                                    t-options='{"widget": "monetary", "display_currency": o.currency_id}'/>
                            </td>
                        </tr>
                        <tr>
                            <td>Total TVA</td>
                            <td class="text-right">
                                <span t-field="o.amount_tax"
                                    t-options='{"widget": "monetary", "display_currency": o.currency_id}'/>
                            </td>
                        </tr>
                        <tr class="border-black o_total">
                            <td><strong>Total TTC</strong></td>
                            <td class="text-right">
                                <span t-field="o.amount_total"
                                    t-options='{"widget": "monetary", "display_currency": o.currency_id}'/>
                            </td>
                        </tr>
                    </table>
                </div>
            </div>
            </xpath>
        </template>

</odoo>
