<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>

        <!-- historique -->
        <record model="ir.ui.view" id="historique_tree_view">
            <field name="name">hr.employee.historique.tree</field>
            <field name="model">hr.employee.historique</field>
            <field name="arch" type="xml">
                <tree create="false">
                    <field name="name"/>
                    <field name="employe_id"/>
                    <field name="document"/>
                    <field name="numero"/>
                    <field name="date_doc"/>
                    <field name="date_prise_effet"/>
                    <field name="user_id"/>
                    <field name="company_id"/>
                    <field name="num_embauche" optional="hide"/>
                    <field name="note"/>
                    <button name="open_doc" string="Ouvrir le document" type="object" icon="fa-file-text-o"/>
                </tree>
            </field>
        </record>

        <record id="historique_filter" model="ir.ui.view">
            <field name="name">hr.historique.filter</field>
            <field name="model">hr.employee.historique</field>
            <field name="arch" type="xml">
                <search string="Demission">
                    <field name="employe_id"/>
                    <field name="user_id"/>
                    <field name="document"/>
                    <field name="numero"/>
                    <field name="num_embauche"/>

                    <filter name="at" string="Attestation  et certificat" domain="[('model_name','=','hr.employee')]"/>
                    <filter name="installation" string="PV installation"
                            domain="[('model_name', '=', 'hr.prime.installation')]"/>
                    <filter name="contrat" string="Contrat/Avenant" domain="[('model_name', '=', 'hr.contract')]"/>
                    <filter name="sanction" string="Sanction" domain="[('model_name', '=', 'hr.sanction')]"/>
                    <field name="note"/>
                    <group expand="0" string="Grouper par...">
                        <filter name="document" string="Document" domain="[]" context="{'group_by':'document'}"
                                help="Type oprération"/>
                        <filter name="num_embauche" string="Numéro embauche" domain="[]"
                                context="{'group_by':'num_embauche'}" help="Type oprération"/>
                        <filter name="employe_id" string="Employé" domain="[]" context="{'group_by':'employe_id'}"
                                help="Employé"/>
                        <filter name="grp_user_id" string="Utillisateur" domain="[]" context="{'group_by':'user_id'}"
                                help="Utillisateur"/>

                    </group>
                </search>
            </field>
        </record>


        <record model="ir.actions.act_window" id="action_historique_tree_view">
            <field name="name">Historique des décisions</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">hr.employee.historique</field>
            <field name="search_view_id" ref="historique_filter"/>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="historique_tree_view"/>
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                    Aucun document n'est encore enregistré
                </p>
                <p>

                </p>
                <p>

                </p>
            </field>
        </record>

        <!-- Top menu item -->

        <menuitem name="Historique des décisions" action="action_historique_tree_view" id="menu_historique"
                  parent="hr_base.menu_carriere" sequence="99"/>

    </data>
</openerp>
