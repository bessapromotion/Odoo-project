<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>

        <!--
        A V E N A N T
        -->

        <!-- Avenant Form -->
        <record model="ir.ui.view" id="avenant_form_view">
            <field name="name">hr.contract.avenant</field>
            <field name="model">hr.contract.avenant</field>
            <field name="arch" type="xml">
                <form string="Avenant">
                    <header>
                        <button name="action_print" string="Imprimer" class="oe_highlight" type="object" icon="fa-print"/>

                        <field name="state" widget="statusbar" options="{'clickable': '1'}"/>
                    </header>
                    <sheet>
                        <h1>
                            <field name="name" class="oe_inline" placeholder="Référence" />
                        </h1>
                        <group>
                            <group>
                                <field name="contract_id"/>
                                <field name="employee_id"/>
                                <field name="date_application"/>
                            </group>
                            <group>
                                <field name="date_etablissement"/>
                                <field name="user_id"/>
                            </group>
                        </group>
                        <notebook>
                            <page string="Articles">
                                <field name="article_ids"/>
                            </page>
                        </notebook>
                    </sheet>
                </form>
            </field>
        </record>
        
        <!-- Avenant Tree -->
        <record model="ir.ui.view" id="avenant_tree_view">
            <field name="name">contract.avenant.tree</field>
            <field name="model">hr.contract.avenant</field>
            <field name="arch" type="xml">
                <tree>
                    <field name="state" invisible="1"/>
                    <field name="name"/>
                    <field name="employee_id"/>
                    <field name="date_etablissement"/>
                    <field name="state"/>
                </tree>
            </field>
        </record>

        <!-- Avenant Filter -->
        <record id="avenant_filter" model="ir.ui.view">
            <field name="name">contract.avenant.filter</field>
            <field name="model">hr.contract.avenant</field>
            <field name="arch" type="xml">
                <search string="Avenant">
                    <field name="name" />
                    <field name="contract_id" />
                    <field name="employee_id" />

                    <group expand="0" string="Grouper par...">
                        <filter name="en_cours" string="En cours" domain="[['state', '=', 'open']]"  help="En cours" />
                    </group>
                </search>
            </field>
        </record>

        <!-- Avenant Tree View Action -->
        <record model="ir.actions.act_window" id="action_avenant_tree_view">
            <field name="name">Avenants de contrat</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">hr.contract.avenant</field>
            <field name="search_view_id" ref="avenant_filter"/>
            <field name="view_mode">tree,form</field>
            <field name="view_id" ref="avenant_tree_view"/>
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                    Créer un nouvel avenant de contrat.
                </p><p>

                </p><p>

                </p>
            </field>
        </record>

        <!-- Avenant Menu -->
        <menuitem name="Avenant de contrat" action="action_avenant_tree_view" id="menu_avenant"
            parent="hr.menu_hr_employee_payroll" sequence="4"/>



        <!--
        A V E N A N T
        A R T I C L E
        -->
        <!-- Avenant Article Form -->
        <record model="ir.ui.view" id="avenant_article_form_view">
            <field name="name">hr.contract.avenant.article</field>
            <field name="model">hr.contract.avenant.article</field>
            <field name="arch" type="xml">
                <form string="Article d'Avenant">
                    <sheet>
                        <strong>Nom</strong>
                        <h1>
                            <field name="name" class="oe_inline" placeholder="Nom" />
                        </h1>
                        <!--
                        <group>
                            <group>
                                <field name="avenant_id"/>
                            </group>
                        </group>
                        -->
                        <group>
                            <group>
                                <field name="modele_article_id"/>
                            </group>
                        </group>
                        <group>
                            <field name="contenu"/>
                        </group>
                    </sheet>
                </form>
            </field>
        </record>
        
        <!-- Avenant Article Tree -->
        <!--
        <record model="ir.ui.view" id="avenant_article_tree_view">
            <field name="name">contract.avenant.article.tree</field>
            <field name="model">hr.contract.avenant.article</field>
            <field name="arch" type="xml">
                <tree>
                    <field name="name"/>
                </tree>
            </field>
        </record>
        -->

        <!-- Avenant Article Filter -->
        <!--
        <record id="avenant_article_filter" model="ir.ui.view">
            <field name="name">contract.avenant.article.filter</field>
            <field name="model">hr.contract.avenant.article</field>
            <field name="arch" type="xml">
                <search string="Avenant">
                    <field name="name" />
                    <field name="avenant_id" />
                </search>
            </field>
        </record>
        -->

        <!-- Avenant Tree View Action -->
        <!--
        <record model="ir.actions.act_window" id="action_avenant_article_tree_view">
            <field name="name">Articles d'Avenant de contrat</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">hr.contract.avenant.article</field>
            <field name="search_view_id" ref="avenant_article_filter"/>
            <field name="view_mode">tree,form</field>
            <field name="view_id" ref="avenant_article_tree_view"/>
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                    Créer un nouvel article d'avenant de contrat.
                </p><p>

                </p><p>

                </p>
            </field>
        </record>
        -->

        <!-- Avenant Article Menu -->
        <!--
        <menuitem name="Article d'Avenant de contrat" action="action_avenant_article_tree_view" id="menu_avenant_article"
            parent="hr_base.menu_operations" sequence="90"/>
        -->



        <!--
        A V E N A N T
        M O D E L E
        A R T I C L E
        -->
        <!-- Avenant Modele Article Form -->
        <record model="ir.ui.view" id="avenant_article_modele_form_view">
            <field name="name">hr.contract.avenant.article.modele</field>
            <field name="model">hr.contract.avenant.article.modele</field>
            <field name="arch" type="xml">
                <form string="Modèle d'Article d'un Avenant">
                    <sheet>
                        <strong>Nom</strong>
                        <h1>
                            <field name="name" class="oe_inline" placeholder="Nom" />
                        </h1>
                        <group>
                            <group>
                                <field name="contract_field" />
                                <field name="old_vals" />
                                <field name="new_vals" />
                            </group>
                            <group>
                                <field name="wage" attrs="{'invisible':[('contract_field','!=','wage')]}" />
                                <field name="type_salaire" attrs="{'invisible':[('contract_field','!=','wage')]}" />
                                <field name="trial_date_start" attrs="{'invisible':[('contract_field','!=','trial')]}" />
                                <field name="trial_date_end" attrs="{'invisible':[('contract_field','!=','trial')]}" />
                            </group>
                        </group>
                        <div>
                            <div class="o_horizontal_separator">Contenu</div>
                            <div class="oe_edit_only">
                                <p>Vous pouvez utiliser les <i>mots-clés</i> suivants dans le contenu de l'article:
                                    <br/>
                                    <code>[[civilité]] [[employé]] [[type_contrat]] [[date_debut_contrat]] [[date_fin_contrat]]</code>
                                </p>
                            </div>
                            <field name="contenu" nolabel="1"/>
                        </div>
                    </sheet>
                </form>
            </field>
        </record>
        
        <!-- Avenant Modele Article Tree -->
        <record model="ir.ui.view" id="avenant_article_modele_tree_view">
            <field name="name">contract.avenant.article.modele.tree</field>
            <field name="model">hr.contract.avenant.article.modele</field>
            <field name="arch" type="xml">
                <tree>
                    <field name="name"/>
                </tree>
            </field>
        </record>

        <!-- Avenant Modele Article Filter -->
        <record id="avenant_article_modele_filter" model="ir.ui.view">
            <field name="name">contract.avenant.article.modele.filter</field>
            <field name="model">hr.contract.avenant.article.modele</field>
            <field name="arch" type="xml">
                <search string="Modèle d'article d'un avenant">
                    <field name="name" />
                </search>
            </field>
        </record>

        <!-- Avenant Modele article Tree View Action -->
        <record model="ir.actions.act_window" id="action_avenant_article_modele_tree_view">
            <field name="name">Modèle d'Article d'un Avenant de contrat</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">hr.contract.avenant.article.modele</field>
            <field name="search_view_id" ref="avenant_article_modele_filter"/>
            <field name="view_mode">tree,form</field>
            <field name="view_id" ref="avenant_article_modele_tree_view"/>
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                    Créer un nouveau modèle d'article d'un avenant de contrat.
                </p><p>

                </p><p>

                </p>
            </field>
        </record>
        -->

        <!-- Avenant Modele Article Menu -->
        <menuitem name="Avenant" id="menu_group_avenant" parent="hr_base.menu_operations" sequence="90"/>
        <menuitem name="Modèle d'Article Avenant" action="action_avenant_article_modele_tree_view" id="menu_avenant_article"
            parent="menu_group_avenant" sequence="90"/>

    </data>
</openerp>
